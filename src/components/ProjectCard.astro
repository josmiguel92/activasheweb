---
type Props = {
  title: string;
  areas?: string[];
  link: string;
  isComingSoon?: boolean;
  preview?: string;
  image?: string;
};

const {
  title,
  areas = [],
  link,
  isComingSoon,
  preview,
  image,
} = Astro.props as Props;

import StatusBadge from "@/components/StatusBadge.astro";
import Button from "@/components/Button.astro";

const formatAreas = (values: string[] = []) => values.join(" • ");
---

<>
  <div
    class="min-w-[280px] overflow-hidden rounded-[2rem] border border-chocolate/20 bg-mustard/5 text-chocolate transition-transform hover:-translate-y-1"
  >
    <div class="relative h-40">
      {
        image ? (
          <>
            <img
              src={image}
              alt={title}
              class="h-full w-full object-cover"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-chocolate/80 to-transparent" />
          </>
        ) : (
          <div class="h-full w-full bg-gradient-to-br from-terracotta/20 to-mustard/20" />
        )
      }
      <div
        class="absolute left-4 top-4 rounded-full border border-soft-olive/60 bg-soft-olive/60 px-3 py-1 text-[10px] font-black uppercase text-warm-cream backdrop-blur"
      >
        {formatAreas(areas)}
      </div>
      <div class="absolute right-4 top-4">
        <StatusBadge
          label={isComingSoon ? "Próximo" : "Activo"}
          tone={isComingSoon ? "accent" : "muted"}
        />
      </div>
    </div>
    <div class="p-6">
      <h3 class="mb-2 text-lg text-olive">{title}</h3>
      {
        preview && (
          <p class="mb-4 line-clamp-2 text-sm text-chocolate/60">{preview}</p>
        )
      }
      <Button
        href={link}
        label="Detalles del proyecto"
        variant="outline"
        showIcon={true}
        icon="arrow"
        class="w-full border-olive !text-olive hover:border-olive"
      />
    </div>
  </div>
</>
